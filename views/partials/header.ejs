<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= locals.title || 'InfinityTech' %></title>
    <meta name="description" content="<%= locals.description || 'Your Ultimate Laptop Destination' %>"/>
    
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" /> 
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">

    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #f9fafb;
        color: #1f2937;
        margin: 0;
        padding: 0;
      }
      .site-header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 50;
        background: linear-gradient(135deg, #4f46e5, #10b981);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      .nav-link {
        position: relative;
        transition: all 0.3s ease;
      }
      .nav-link:hover::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 2px;
        bottom: -4px;
        left: 0;
        background: #ffffff;
        transition: width 0.3s ease;
      }
      [x-cloak] { display: none !important; }
    </style>
  </head>
  <body class="flex flex-col min-h-screen">
    <header class="site-header">
      <nav 
        x-data="navigationMenu()" 
        class="container mx-auto px-4 py-3 flex justify-between items-center"
      >
        <!-- Logo or Site Name -->
        <div class="text-white text-xl font-bold">InfinityTech</div>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex space-x-6">
          <a href="/" class="nav-link text-white">Home</a>
          <a href="/shop" class="nav-link text-white">Shop</a>
          <a href="/about" class="nav-link text-white">About</a>
          <a href="/contact" class="nav-link text-white">Contact</a>
        </div>

        <!-- User Menu -->
        <div class="flex items-center space-x-4">
          <% if (locals.user) { %>
            <div 
              x-data="{ 
                open: false, 
                toggle(event) { 
                  event.stopPropagation(); 
                  this.open = !this.open; 
                }, 
                close(event) { 
                  if (event && event.target.closest('button')) return;
                  this.open = false; 
                }
              }" 
              @click.outside="close"
              class="relative"
            >
              <button 
                @click="toggle" 
                class="relative flex items-center px-4 py-2 text-gray-800 bg-white rounded-lg shadow-sm border border-gray-200 hover:bg-gray-50"
              >
                <span class="text-sm font-medium"><%= user.name || 'User' %></span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 ml-2">
                  <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                </svg>
              </button>
              
              <div 
                x-cloak
                x-show="open" 
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 scale-90"
                x-transition:enter-end="opacity-100 scale-100"
                x-transition:leave="transition ease-in duration-300"
                x-transition:leave-start="opacity-100 scale-100"
                x-transition:leave-end="opacity-0 scale-90"
                class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-50"
              >
                <div class="py-1">
                  <a href="/profile" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                  <a href="/orders" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Orders</a>
                  <a href="/logout" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Logout</a>
                </div>
              </div>
            </div>
          <% } else { %>
            <a href="/login" class="text-white px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Login</a>
          <% } %>

          <!-- Mobile Menu Toggle -->
          <button 
            @click="toggleMobileMenu" 
            class="md:hidden text-white focus:outline-none"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </div>
      </nav>

      <!-- Mobile Menu -->
      <div 
        x-show="mobileMenuOpen" 
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 scale-90"
        x-transition:enter-end="opacity-100 scale-100"
        x-transition:leave="transition ease-in duration-300"
        x-transition:leave-start="opacity-100 scale-100"
        x-transition:leave-end="opacity-0 scale-90"
        class="md:hidden absolute top-full left-0 right-0 bg-white shadow-lg"
      >
        <div class="px-2 pt-2 pb-3 space-y-1">
          <a href="/" class="block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-100">Home</a>
          <a href="/shop" class="block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-100">Shop</a>
          <a href="/about" class="block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-100">About</a>
          <a href="/contact" class="block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-100">Contact</a>
        </div>
      </div>

      <script>
        document.addEventListener('alpine:init', () => {
          Alpine.data('navigationMenu', () => ({
            mobileMenuOpen: false,
            toggleMobileMenu() {
              this.mobileMenuOpen = !this.mobileMenuOpen;
            }
          }));
        });
      </script>
    </header>